"use client";

import {
  Button,
  Container,
  Group,
  Burger,
  Drawer,
  Stack,
  Divider,
  Avatar,
  ActionIcon,
  Menu,
} from "@mantine/core";
import { Logo } from "../logo/logo";
import { redirect } from "@/utils";
import { useAppSelector } from "@/store/store";
import { CgLogOut, CgProfile } from "react-icons/cg";
import { useDispatch } from "react-redux";
import { logout } from "@/store/slices";
import Link from "next/link";
import { useState } from "react";
import { FaAngleRight } from "react-icons/fa6";
import { IoSearch } from "react-icons/io5";
import { IoIosArrowDown, IoIosArrowUp } from "react-icons/io";
import { useDisclosure } from "@mantine/hooks";
import { LuCirclePlus } from "react-icons/lu";
import { CreateTripModal } from "@/modals";

export const AppHeader = () => {
  const dispatch = useDispatch();
  const user = useAppSelector((state) => state.user);
  const [opened, setOpened] = useState(false);

  const [isOpenCreateTripModal, setIsOpenCreateTripModal] = useState(false);

  const [isOpenMenu, { toggle: toggleMenu }] = useDisclosure(false);

  const logoutUser = () => {
    dispatch(logout());
    setOpened(false);
  };

  return (
    <div className="border-b border-solid border-gray-light border-r-0 border-l-0 border-t-0 fixed z-50 w-full bg-white">
      <Container size={"xl"}>
        <header className="p-2">
          <Group justify="space-between" h="100%">
            <div className="flex items-center gap-4">
              <Link href={"/"} className="flex items-center">
                <svg className="w-[120px] h-[40px] md:w-[180px] md:h-[60px]" width="180" height="60" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M23.4251 10.875C24.0584 11.4583 24.5251 12.1583 24.8251 12.975C25.1251 13.775 25.2418 14.575 25.1751 15.375C25.1084 16.1417 24.8668 16.85 24.4501 17.5C24.0334 18.1333 23.4001 18.6167 22.5501 18.95C21.8834 19.2333 21.2251 19.4333 20.5751 19.55C19.9251 19.6667 19.2084 19.7583 18.4251 19.825C18.0751 19.8583 17.7751 19.8833 17.5251 19.9C17.2918 19.9 17.0168 19.9083 16.7001 19.925C16.6334 19.925 16.5168 19.925 16.3501 19.925C16.2001 19.925 16.0918 19.9333 16.0251 19.95V25.125C15.9751 25.4417 15.9084 25.7667 15.8251 26.1C15.7584 26.4333 15.5668 26.6917 15.2501 26.875C15.0668 26.975 14.8418 27.0333 14.5751 27.05C14.3084 27.0667 14.0668 27.0583 13.8501 27.025C13.6168 26.9917 13.4168 26.9333 13.2501 26.85C13.1001 26.75 12.9751 26.5833 12.8751 26.35C12.8084 26.2 12.7418 26.0333 12.6751 25.85C12.6251 25.65 12.6001 25.4083 12.6001 25.125V11.3C12.6001 11.1833 12.6084 11.075 12.6251 10.975C12.6418 10.875 12.6584 10.775 12.6751 10.675C12.7084 10.5917 12.7334 10.5 12.7501 10.4C12.7668 10.3 12.7918 10.2083 12.8251 10.125C12.8584 10.0417 12.8918 9.96667 12.9251 9.9C12.9751 9.83333 13.0334 9.775 13.1001 9.725C13.1834 9.64167 13.3084 9.56667 13.4751 9.5C13.6584 9.43333 13.9251 9.4 14.2751 9.4H14.3251C14.8418 9.36667 15.4168 9.34167 16.0501 9.325C16.6834 9.29167 17.2084 9.3 17.6251 9.35C17.8584 9.38333 18.0751 9.40833 18.2751 9.425C18.4751 9.425 18.6668 9.43333 18.8501 9.45C19.0501 9.46667 19.2501 9.48333 19.4501 9.5C19.6501 9.51667 19.8501 9.54167 20.0501 9.575C20.2168 9.60833 20.3668 9.63333 20.5001 9.65C20.6501 9.66667 20.8001 9.69167 20.9501 9.725C21.0834 9.75833 21.2251 9.79167 21.3751 9.825C21.5418 9.85833 21.6918 9.91667 21.8251 10C22.1751 10.1 22.4668 10.225 22.7001 10.375C22.9334 10.525 23.1751 10.6917 23.4251 10.875ZM21.9251 15C21.9418 14.6 21.8584 14.25 21.6751 13.95C21.5084 13.65 21.2668 13.4 20.9501 13.2C20.6334 13 20.2751 12.8417 19.8751 12.725C19.4751 12.6083 19.0751 12.525 18.6751 12.475C18.5751 12.475 18.4334 12.475 18.2501 12.475C18.0834 12.4583 17.9001 12.45 17.7001 12.45C17.5001 12.4333 17.3084 12.425 17.1251 12.425C16.9584 12.4083 16.8251 12.4 16.7251 12.4C16.6418 12.3833 16.5418 12.375 16.4251 12.375C16.3084 12.375 16.1751 12.375 16.0251 12.375C16.0418 12.8917 16.0501 13.3917 16.0501 13.875C16.0501 14.3417 16.0501 14.85 16.0501 15.4C16.0334 15.7 16.0251 16 16.0251 16.3C16.0251 16.6 16.0251 16.8917 16.0251 17.175L17.5751 17.15C17.9751 17.15 18.4168 17.125 18.9001 17.075C19.3834 17.025 19.8418 16.925 20.2751 16.775C20.7084 16.625 21.0751 16.4083 21.3751 16.125C21.6918 15.8417 21.8751 15.4667 21.9251 15ZM28.5692 15.7C29.1192 15.4333 29.6942 15.2417 30.2942 15.125C30.8942 15.0083 31.4859 14.9833 32.0692 15.05C32.6692 15.1167 33.2442 15.275 33.7942 15.525C34.3609 15.775 34.8776 16.125 35.3442 16.575C35.7276 16.9583 36.0609 17.425 36.3442 17.975C36.6276 18.5083 36.8359 19.0333 36.9692 19.55C37.2526 20.4667 37.2942 21.3917 37.0942 22.325C36.8942 23.2583 36.5526 24.125 36.0692 24.925C35.8359 25.2917 35.5442 25.625 35.1942 25.925C34.8609 26.2083 34.5026 26.4417 34.1192 26.625C33.6192 26.8583 33.0776 27.0167 32.4942 27.1C31.9109 27.2 31.3442 27.225 30.7942 27.175C29.7942 27.125 28.9109 26.875 28.1442 26.425C27.3942 25.975 26.7859 25.4 26.3192 24.7C25.8692 24 25.5692 23.2083 25.4192 22.325C25.2859 21.425 25.3442 20.5083 25.5942 19.575C25.8609 18.575 26.2442 17.7667 26.7442 17.15C27.2609 16.5167 27.8692 16.0333 28.5692 15.7ZM29.3192 19.05C29.0692 19.2833 28.8776 19.575 28.7442 19.925C28.6109 20.275 28.5276 20.6417 28.4942 21.025C28.4609 21.3917 28.4859 21.7667 28.5692 22.15C28.6692 22.5167 28.8192 22.85 29.0192 23.15C29.1859 23.4 29.4859 23.6083 29.9192 23.775C30.3526 23.9417 30.8026 24.0417 31.2692 24.075C31.8026 24.1083 32.2692 23.9667 32.6692 23.65C33.0692 23.3167 33.3692 22.9083 33.5692 22.425C33.7859 21.9417 33.8859 21.4167 33.8692 20.85C33.8526 20.2833 33.7026 19.7667 33.4192 19.3C33.2192 18.9667 32.9359 18.725 32.5692 18.575C32.2192 18.4083 31.8442 18.325 31.4442 18.325C31.0609 18.3083 30.6776 18.3667 30.2942 18.5C29.9109 18.6167 29.5859 18.8 29.3192 19.05ZM46.2114 15.75C46.6948 15.95 47.1364 16.2417 47.5364 16.625C47.9364 16.9917 48.2781 17.4167 48.5614 17.9C48.8614 18.3833 49.0864 18.9083 49.2364 19.475C49.4031 20.025 49.4864 20.5833 49.4864 21.15C49.5031 22 49.3031 22.8 48.8864 23.55C48.4864 24.3 47.8281 24.875 46.9114 25.275C46.2114 25.5583 45.4864 25.775 44.7364 25.925C44.0031 26.0583 43.2364 26.15 42.4364 26.2V30.775C42.4364 30.875 42.4198 30.9667 42.3864 31.05C42.3698 31.1333 42.3614 31.2167 42.3614 31.3C42.3281 31.4667 42.2864 31.6167 42.2364 31.75C42.2031 31.8833 42.1531 32.025 42.0864 32.175C42.0198 32.275 41.9531 32.3667 41.8864 32.45C41.8198 32.5333 41.7448 32.6167 41.6614 32.7C41.2614 32.9 40.8448 32.9417 40.4114 32.825C40.1448 32.8083 39.9281 32.725 39.7614 32.575C39.6114 32.425 39.5031 32.2667 39.4364 32.1C39.3698 31.9333 39.3114 31.7417 39.2614 31.525C39.2448 31.4417 39.2281 31.3583 39.2114 31.275C39.2114 31.2083 39.2114 31.1333 39.2114 31.05V17.125C39.2114 17.025 39.2114 16.925 39.2114 16.825C39.2281 16.7083 39.2448 16.5917 39.2614 16.475C39.2781 16.275 39.3281 16.075 39.4114 15.875C39.5614 15.4583 39.8698 15.175 40.3364 15.025C40.8031 14.875 41.3281 14.8083 41.9114 14.825C42.3114 14.8417 42.7198 14.8833 43.1364 14.95C43.5698 15.0167 43.9781 15.1 44.3614 15.2C44.7614 15.2833 45.1198 15.375 45.4364 15.475C45.7531 15.575 46.0114 15.6667 46.2114 15.75ZM46.2614 21.15C46.3281 20.6833 46.2698 20.2917 46.0864 19.975C45.9198 19.6417 45.6781 19.375 45.3614 19.175C45.0448 18.9583 44.6781 18.7917 44.2614 18.675C43.8614 18.5583 43.4614 18.475 43.0614 18.425C43.0114 18.4083 42.9281 18.4 42.8114 18.4C42.7114 18.4 42.5948 18.4 42.4614 18.4C42.4614 18.9333 42.4614 19.45 42.4614 19.95C42.4781 20.4333 42.4781 20.9583 42.4614 21.525V23.2C42.8448 23.1833 43.2448 23.1417 43.6614 23.075C44.0948 23.0083 44.4948 22.9 44.8614 22.75C45.2281 22.6 45.5364 22.4 45.7864 22.15C46.0531 21.9 46.2114 21.5667 46.2614 21.15ZM61.7911 21.05C61.7578 21.6 61.7244 22.1583 61.6911 22.725C61.6578 23.275 61.5661 23.8083 61.4161 24.325C61.2828 24.8417 61.0661 25.3083 60.7661 25.725C60.4828 26.1417 60.0744 26.475 59.5411 26.725C59.0744 26.9583 58.5744 27.1167 58.0411 27.2C57.5078 27.3 56.9744 27.3417 56.4411 27.325C55.9078 27.3083 55.3911 27.225 54.8911 27.075C54.3911 26.9417 53.9411 26.75 53.5411 26.5C53.1411 26.25 52.8161 25.925 52.5661 25.525C52.3161 25.125 52.1161 24.6917 51.9661 24.225C51.8328 23.7583 51.7411 23.275 51.6911 22.775C51.6411 22.275 51.6078 21.8083 51.5911 21.375C51.5244 20.225 51.5244 19.0917 51.5911 17.975C51.5911 17.7583 51.5911 17.5167 51.5911 17.25C51.5911 16.9667 51.6078 16.6917 51.6411 16.425C51.6911 16.1583 51.7661 15.9167 51.8661 15.7C51.9661 15.4667 52.1328 15.2917 52.3661 15.175C52.8661 14.9083 53.3244 14.8917 53.7411 15.125C54.1744 15.3583 54.4328 15.8417 54.5161 16.575C54.5661 16.9583 54.5828 17.3833 54.5661 17.85C54.5661 18.3167 54.5828 18.7417 54.6161 19.125C54.6328 19.6917 54.6494 20.3083 54.6661 20.975C54.6828 21.625 54.7744 22.2083 54.9411 22.725C55.1244 23.2417 55.4161 23.6333 55.8161 23.9C56.2328 24.15 56.8494 24.1583 57.6661 23.925C58.0494 23.8083 58.2994 23.5167 58.4161 23.05C58.5494 22.5833 58.6161 21.8917 58.6161 20.975C58.6161 20.575 58.6078 20.1333 58.5911 19.65C58.5744 19.1667 58.5661 18.6917 58.5661 18.225C58.5661 17.7417 58.5744 17.3 58.5911 16.9C58.6244 16.4833 58.6744 16.1667 58.7411 15.95C58.8244 15.65 58.9994 15.425 59.2661 15.275C59.5328 15.125 59.8161 15.05 60.1161 15.05C60.4161 15.0333 60.6994 15.0917 60.9661 15.225C61.2328 15.3583 61.4161 15.575 61.5161 15.875C61.6161 16.1417 61.6828 16.4833 61.7161 16.9C61.7661 17.3 61.7994 17.7417 61.8161 18.225C61.8328 18.6917 61.8328 19.175 61.8161 19.675C61.8161 20.1583 61.8078 20.6167 61.7911 21.05ZM73.9831 15.975C74.1164 16.2917 74.1248 16.6417 74.0081 17.025C73.9081 17.4083 73.7164 17.6583 73.4331 17.775C73.2831 17.8417 73.0831 17.9 72.8331 17.95C72.5831 17.9833 72.3081 18.0167 72.0081 18.05C71.7248 18.0833 71.4414 18.1083 71.1581 18.125C70.8748 18.1417 70.6331 18.15 70.4331 18.15C70.4498 18.65 70.4664 19.1667 70.4831 19.7C70.4998 20.2167 70.5164 20.725 70.5331 21.225C70.5498 21.725 70.5581 22.2083 70.5581 22.675C70.5581 23.125 70.5498 23.5333 70.5331 23.9C70.5331 24.15 70.5331 24.4417 70.5331 24.775C70.5331 25.0917 70.5081 25.4 70.4581 25.7C70.4248 26 70.3664 26.2667 70.2831 26.5C70.1998 26.7167 70.0748 26.8583 69.9081 26.925C69.3914 27.1417 68.9164 27.2 68.4831 27.1C68.0664 27.0167 67.7664 26.8417 67.5831 26.575C67.4498 26.3583 67.3498 26.1083 67.2831 25.825C67.2164 25.525 67.1664 25.225 67.1331 24.925C67.1164 24.6083 67.1081 24.3083 67.1081 24.025C67.1248 23.725 67.1331 23.4667 67.1331 23.25C67.1498 22.55 67.1581 21.7583 67.1581 20.875C67.1748 19.975 67.1831 19.075 67.1831 18.175H66.8081C66.6081 18.175 66.3498 18.175 66.0331 18.175C65.7331 18.1583 65.4248 18.1333 65.1081 18.1C64.8081 18.05 64.5248 17.9917 64.2581 17.925C63.9914 17.8417 63.7998 17.725 63.6831 17.575C63.4998 17.3583 63.3831 17.125 63.3331 16.875C63.2998 16.625 63.3164 16.3917 63.3831 16.175C63.4664 15.9417 63.5914 15.7417 63.7581 15.575C63.9248 15.3917 64.1164 15.275 64.3331 15.225C64.6331 15.1417 65.0581 15.1 65.6081 15.1C66.1581 15.0833 66.6748 15.0833 67.1581 15.1C67.1414 14.9333 67.1331 14.775 67.1331 14.625C67.1331 14.4583 67.1248 14.3 67.1081 14.15C67.0914 13.95 67.0831 13.7 67.0831 13.4C67.0831 13.0833 67.0998 12.775 67.1331 12.475C67.1831 12.1583 67.2581 11.8667 67.3581 11.6C67.4581 11.3167 67.5998 11.1 67.7831 10.95C68.0331 10.75 68.2831 10.6417 68.5331 10.625C68.7998 10.5917 69.0414 10.625 69.2581 10.725C69.4914 10.825 69.6831 10.975 69.8331 11.175C69.9998 11.3583 70.1164 11.5667 70.1831 11.8C70.2331 12 70.2748 12.2417 70.3081 12.525C70.3414 12.7917 70.3581 13.075 70.3581 13.375C70.3748 13.675 70.3831 13.975 70.3831 14.275C70.3831 14.575 70.3831 14.85 70.3831 15.1H70.6331C70.8831 15.1 71.1748 15.0917 71.5081 15.075C71.8414 15.0583 72.1664 15.0667 72.4831 15.1C72.8164 15.1333 73.1164 15.2167 73.3831 15.35C73.6498 15.4667 73.8498 15.675 73.9831 15.975ZM79.2511 17.525C79.2511 17.9917 79.2511 18.5167 79.2511 19.1C79.2677 19.6833 79.2761 20.2917 79.2761 20.925C79.2761 21.5417 79.2761 22.1583 79.2761 22.775C79.2761 23.375 79.2677 23.9333 79.2511 24.45C79.2344 24.7 79.2094 24.975 79.1761 25.275C79.1427 25.5583 79.0761 25.825 78.9761 26.075C78.8761 26.325 78.7177 26.5333 78.5011 26.7C78.3011 26.85 78.0261 26.9167 77.6761 26.9C77.1594 26.8667 76.7844 26.6417 76.5511 26.225C76.3344 25.8083 76.2094 25.225 76.1761 24.475C76.1761 24.0917 76.1677 23.65 76.1511 23.15C76.1511 22.65 76.1427 22.1417 76.1261 21.625C76.1261 21.1083 76.1261 20.6083 76.1261 20.125C76.1261 19.625 76.1261 19.175 76.1261 18.775C76.1261 18.5417 76.1177 18.2583 76.1011 17.925C76.1011 17.5917 76.1094 17.25 76.1261 16.9C76.1427 16.55 76.1844 16.2167 76.2511 15.9C76.3177 15.5667 76.4261 15.2917 76.5761 15.075C76.6927 14.9417 76.8594 14.8417 77.0761 14.775C77.2927 14.6917 77.5177 14.65 77.7511 14.65C78.0011 14.65 78.2344 14.6917 78.4511 14.775C78.6844 14.8583 78.8511 14.975 78.9511 15.125C79.0177 15.225 79.0677 15.3667 79.1011 15.55C79.1344 15.7333 79.1594 15.9417 79.1761 16.175C79.2094 16.3917 79.2261 16.625 79.2261 16.875C79.2427 17.1083 79.2511 17.325 79.2511 17.525ZM78.3011 12.475C77.7844 12.6083 77.3511 12.5583 77.0011 12.325C76.6677 12.075 76.4594 11.7083 76.3761 11.225C76.3094 10.875 76.3344 10.5667 76.4511 10.3C76.5677 10.0333 76.7427 9.83333 76.9761 9.7C77.2094 9.55 77.4761 9.48333 77.7761 9.5C78.0761 9.51667 78.3761 9.63333 78.6761 9.85C78.9594 10.05 79.1594 10.2833 79.2761 10.55C79.4094 10.8167 79.4511 11.075 79.4011 11.325C79.3677 11.575 79.2594 11.8083 79.0761 12.025C78.8927 12.225 78.6344 12.375 78.3011 12.475ZM84.5228 27C84.5228 27.4333 84.3644 27.8 84.0478 28.1C83.7478 28.4167 83.3811 28.575 82.9478 28.575C82.5144 28.575 82.1394 28.4167 81.8228 28.1C81.5228 27.8 81.3728 27.4333 81.3728 27C81.3728 26.5667 81.5228 26.1917 81.8228 25.875C82.1394 25.5583 82.5144 25.4 82.9478 25.4C83.3811 25.4 83.7478 25.5583 84.0478 25.875C84.3644 26.1917 84.5228 26.5667 84.5228 27ZM97.1276 15.975C97.261 16.2917 97.2693 16.6417 97.1526 17.025C97.0526 17.4083 96.861 17.6583 96.5776 17.775C96.4276 17.8417 96.2276 17.9 95.9776 17.95C95.7276 17.9833 95.4526 18.0167 95.1526 18.05C94.8693 18.0833 94.586 18.1083 94.3026 18.125C94.0193 18.1417 93.7776 18.15 93.5776 18.15C93.5943 18.65 93.611 19.1667 93.6276 19.7C93.6443 20.2167 93.661 20.725 93.6776 21.225C93.6943 21.725 93.7026 22.2083 93.7026 22.675C93.7026 23.125 93.6943 23.5333 93.6776 23.9C93.6776 24.15 93.6776 24.4417 93.6776 24.775C93.6776 25.0917 93.6526 25.4 93.6026 25.7C93.5693 26 93.511 26.2667 93.4276 26.5C93.3443 26.7167 93.2193 26.8583 93.0526 26.925C92.536 27.1417 92.061 27.2 91.6276 27.1C91.211 27.0167 90.911 26.8417 90.7276 26.575C90.5943 26.3583 90.4943 26.1083 90.4276 25.825C90.361 25.525 90.311 25.225 90.2776 24.925C90.261 24.6083 90.2526 24.3083 90.2526 24.025C90.2693 23.725 90.2776 23.4667 90.2776 23.25C90.2943 22.55 90.3026 21.7583 90.3026 20.875C90.3193 19.975 90.3276 19.075 90.3276 18.175H89.9526C89.7526 18.175 89.4943 18.175 89.1776 18.175C88.8776 18.1583 88.5693 18.1333 88.2526 18.1C87.9526 18.05 87.6693 17.9917 87.4026 17.925C87.136 17.8417 86.9443 17.725 86.8276 17.575C86.6443 17.3583 86.5276 17.125 86.4776 16.875C86.4443 16.625 86.461 16.3917 86.5276 16.175C86.611 15.9417 86.736 15.7417 86.9026 15.575C87.0693 15.3917 87.261 15.275 87.4776 15.225C87.7776 15.1417 88.2026 15.1 88.7526 15.1C89.3026 15.0833 89.8193 15.0833 90.3026 15.1C90.286 14.9333 90.2776 14.775 90.2776 14.625C90.2776 14.4583 90.2693 14.3 90.2526 14.15C90.236 13.95 90.2276 13.7 90.2276 13.4C90.2276 13.0833 90.2443 12.775 90.2776 12.475C90.3276 12.1583 90.4026 11.8667 90.5026 11.6C90.6026 11.3167 90.7443 11.1 90.9276 10.95C91.1776 10.75 91.4276 10.6417 91.6776 10.625C91.9443 10.5917 92.186 10.625 92.4026 10.725C92.636 10.825 92.8276 10.975 92.9776 11.175C93.1443 11.3583 93.261 11.5667 93.3276 11.8C93.3776 12 93.4193 12.2417 93.4526 12.525C93.486 12.7917 93.5026 13.075 93.5026 13.375C93.5193 13.675 93.5276 13.975 93.5276 14.275C93.5276 14.575 93.5276 14.85 93.5276 15.1H93.7776C94.0276 15.1 94.3193 15.0917 94.6526 15.075C94.986 15.0583 95.311 15.0667 95.6276 15.1C95.961 15.1333 96.261 15.2167 96.5276 15.35C96.7943 15.4667 96.9943 15.675 97.1276 15.975ZM104.25 12.525C103.75 12.675 103.325 12.625 102.975 12.375C102.625 12.1083 102.408 11.7333 102.325 11.25C102.275 10.9 102.308 10.5917 102.425 10.325C102.558 10.0583 102.733 9.85833 102.95 9.725C103.183 9.59167 103.45 9.53333 103.75 9.55C104.05 9.56667 104.35 9.68333 104.65 9.9C104.933 10.1 105.133 10.3333 105.25 10.6C105.383 10.85 105.425 11.1 105.375 11.35C105.341 11.6 105.233 11.8333 105.05 12.05C104.866 12.2667 104.6 12.425 104.25 12.525ZM105.25 17.125C105.25 17.325 105.25 17.7 105.25 18.25C105.25 18.8 105.25 19.4 105.25 20.05C105.25 20.6833 105.25 21.3 105.25 21.9C105.25 22.5 105.25 22.9583 105.25 23.275C105.233 23.775 105.2 24.3083 105.15 24.875C105.116 25.4417 105.033 26 104.9 26.55C104.783 27.1 104.591 27.6083 104.325 28.075C104.058 28.5583 103.691 28.9583 103.225 29.275C102.691 29.625 102.108 29.85 101.475 29.95C100.841 30.0667 100.225 30.0333 99.6245 29.85C99.2578 29.7667 98.8995 29.6417 98.5495 29.475C98.2162 29.3083 97.9328 29.0917 97.6995 28.825C97.3995 28.5083 97.1828 28.125 97.0495 27.675C96.9162 27.2417 96.9995 26.8333 97.2995 26.45C97.4995 26.2 97.7412 26.0417 98.0245 25.975C98.3245 25.8917 98.6162 25.925 98.8995 26.075C99.1662 26.2083 99.4245 26.3417 99.6745 26.475C99.9245 26.6083 100.175 26.7 100.425 26.75C100.675 26.7833 100.925 26.7583 101.175 26.675C101.425 26.575 101.675 26.375 101.925 26.075C102.041 25.925 102.125 25.7083 102.175 25.425C102.241 25.1417 102.283 24.8333 102.3 24.5C102.333 24.15 102.35 23.8083 102.35 23.475C102.35 23.125 102.35 22.8167 102.35 22.55C102.35 22.1833 102.35 21.875 102.35 21.625C102.35 21.3583 102.35 21.1167 102.35 20.9C102.35 20.6667 102.35 20.4333 102.35 20.2C102.35 19.95 102.35 19.65 102.35 19.3C102.35 19.1 102.341 18.8 102.325 18.4C102.308 18 102.3 17.5833 102.3 17.15C102.316 16.7 102.35 16.2833 102.4 15.9C102.466 15.5167 102.566 15.2417 102.7 15.075C102.916 14.7917 103.191 14.65 103.525 14.65C103.875 14.6333 104.191 14.7167 104.475 14.9C104.658 15.0167 104.8 15.1667 104.9 15.35C105 15.5167 105.075 15.7 105.125 15.9C105.175 16.1 105.208 16.3083 105.225 16.525C105.241 16.725 105.25 16.925 105.25 17.125Z" fill="url(#paint0_linear_269_381)" />
                  <defs>
                    <linearGradient id="paint0_linear_269_381" x1="0" y1="19.8587" x2="118" y2="19.8587" gradientUnits="userSpaceOnUse">
                      <stop offset="0.1" stop-color="#01686D" />
                      <stop offset="1" stop-color="#1BBCB7" />
                    </linearGradient>
                  </defs>
                </svg>
              </Link>
              <Group visibleFrom="sm">
                <Link
                  className="text-main text-[16px] p-0 no-underline font-bold"
                  href={"/trips?type=bus"}
                >
                  Автобус
                </Link>
                <Link
                  className="text-main text-[16px] p-0 no-underline font-bold"
                  href={"/trips?type=car"}
                >
                  Автомобиль
                </Link>
              </Group>
            </div>

            {!user?.isAuthenticated && (
              <Group visibleFrom="sm" className="gap-0">
                <Avatar size="lg" color="blue" className="border-transparent" />
                <Menu position="bottom-end" shadow="md" width={400} opened={isOpenMenu} onOpen={toggleMenu} onClose={toggleMenu}>
                  <Menu.Target>
                    <ActionIcon variant="transparent" color="blue.6" size="lg" onClick={() => toggleMenu()}>
                      {isOpenMenu ? <IoIosArrowUp size={24} /> : <IoIosArrowDown size={24} />}
                    </ActionIcon>
                  </Menu.Target>

                  <Menu.Dropdown className="border-none mt-2.5">
                    <Menu.Item>
                      <Button
                        fullWidth
                        variant="transparent"
                        className="text-blue-600 text-[16px] p-0"
                        justify="space-between"
                        rightSection={<FaAngleRight />}
                        onClick={() => {
                          redirect("/auth");
                          setOpened(false);
                        }}
                      >
                        Вход
                      </Button>

                    </Menu.Item>
                    <Menu.Item>
                      <Button
                        fullWidth
                        variant="transparent"
                        className="text-blue-600 text-[16px] p-0"
                        justify="space-between"
                        rightSection={<FaAngleRight />}
                        onClick={() => {
                          redirect("/register");
                          setOpened(false);
                        }}
                      >
                        Регистрация
                      </Button>
                    </Menu.Item>
                  </Menu.Dropdown>
                </Menu>
              </Group>
            )}

            {user?.isAuthenticated && (
              <Group visibleFrom="sm" className="gap-0">
                <div className="flex items-center gap-6">
                  <Button
                    fullWidth
                    variant="transparent"
                    justify="space-between"
                    className="text-main p-0"
                    leftSection={<LuCirclePlus size={24} />}
                    onClick={() => setIsOpenCreateTripModal(true)}
                  >
                    Создать поездку
                  </Button>
                  <div className="flex items-center">
                    <Avatar size="lg" classNames={{
                      placeholder: 'text-main'
                    }} className="border-transparent" />
                    <Menu position="bottom-end" shadow="md" width={400} opened={isOpenMenu} onOpen={toggleMenu} onClose={toggleMenu}>
                      <Menu.Target>
                        <ActionIcon variant="transparent" color="blue.6" size="lg" onClick={() => toggleMenu()}>
                          {isOpenMenu ? <IoIosArrowUp size={24} /> : <IoIosArrowDown size={24} />}
                        </ActionIcon>
                      </Menu.Target>

                      <Menu.Dropdown className="border-none mt-2.5">
                        <Menu.Item>
                          <Button
                            fullWidth
                            variant="transparent"
                            justify="space-between"
                            className="text-dark-blue p-0"
                            onClick={() => {
                              redirect("/my-trips");
                            }}
                          >
                            Мои поездки
                          </Button>
                        </Menu.Item>
                        <Menu.Item>
                          <Button
                            fullWidth
                            rightSection={<CgProfile
                              className="text-dark-blue size-6" />}
                            justify="space-between"
                            variant="transparent"
                            className="text-dark-blue p-0"
                            onClick={() => redirect("/profile")}
                          >
                            Профиль
                          </Button>
                        </Menu.Item>
                        <Menu.Item>
                          <Button
                            fullWidth
                            rightSection={<CgLogOut
                              className="text-red-100 size-6" />}
                            justify="space-between"
                            variant="transparent"
                            className="text-red-100 hover:text-red-100 p-0"
                            onClick={logoutUser}
                          >
                            Выйти
                          </Button>
                        </Menu.Item>
                      </Menu.Dropdown>
                    </Menu>
                  </div>
                </div>
              </Group>
            )}

            <Burger
              opened={opened}
              onClick={() => setOpened(!opened)}
              className="sm:hidden"
            />

            <Drawer
              opened={opened}
              onClose={() => setOpened(false)}
              position="left"
              size="90%"
              title="Poputi TJ"
              classNames={{
                title: "text-blue-600 text-[24px] font-bold"
              }}
            >
              <Stack>
                {!user?.isAuthenticated && (
                  <>
                    <Button
                      fullWidth
                      variant="transparent"
                      className="text-blue-600 text-[16px] p-0"
                      justify="space-between"
                      rightSection={<FaAngleRight />}
                      onClick={() => {
                        redirect("/auth");
                        setOpened(false);
                      }}
                    >
                      Вход
                    </Button>
                    <Button
                      fullWidth
                      variant="transparent"
                      className="text-blue-600 text-[16px] p-0"
                      justify="space-between"
                      rightSection={<FaAngleRight />}
                      onClick={() => {
                        redirect("/register");
                        setOpened(false);
                      }}
                    >
                      Регистрация
                    </Button>
                  </>
                )}
                {user?.isAuthenticated && (
                  <>
                    <Button
                      fullWidth
                      justify="space-between"
                      rightSection={<FaAngleRight />}
                      variant="transparent"
                      className="text-blue-600 text-[16px] p-0"
                      onClick={() => {
                        redirect("/my-trips");
                        setOpened(false);
                      }}
                    >
                      Мои поездки
                    </Button>
                    <Button
                      fullWidth
                      justify="space-between"
                      rightSection={<FaAngleRight />}
                      variant="transparent"
                      className="text-blue-600 text-[16px] p-0"
                      onClick={() => {
                        redirect("/profile");
                        setOpened(false);
                      }}
                    >
                      Профиль
                    </Button>
                    <Button
                      fullWidth
                      justify="space-between"
                      rightSection={
                        <CgLogOut className="text-red-100 size-6" />
                      }
                      variant="transparent"
                      className="text-red-100 text-[16px] p-0"
                      onClick={logoutUser}
                    >
                      Выйти
                    </Button>
                  </>
                )}
                <Divider />
                <p className="text-[22px] text-blue-600 font-bold">
                  Путешествие по...
                </p>
                <Button
                  fullWidth
                  variant="transparent"
                  className="text-blue-600 text-[16px] p-0"
                  justify="space-between"
                  rightSection={<FaAngleRight />}
                  onClick={() => {
                    redirect("/trips?type=bus");
                    setOpened(false);
                  }}
                >
                  Автобус
                </Button>
                <Button
                  fullWidth
                  variant="transparent"
                  className="text-blue-600 text-[16px] p-0"
                  justify="space-between"
                  rightSection={<FaAngleRight />}
                  onClick={() => {
                    redirect("/trips?type=car");
                    setOpened(false);
                  }}
                >
                  Автомобиль
                </Button>
              </Stack>
            </Drawer>
          </Group>
        </header>
      </Container>

      <CreateTripModal close={() => setIsOpenCreateTripModal(false)} opened={isOpenCreateTripModal} />
    </div>
  );
};
